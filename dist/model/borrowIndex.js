/*! This is uglify test - 2015-12-22 */!function(a,b,c){b.model.set({name:"borrowIndex",css:["borrow_index"],html:["borrow_index"],fn:function(){var b={},c=this;c.init=function(){},c.reflash=function(){var d=_.template(c.html[0])(b);c.target.html(c.css[0]+d),c.target.find("[D_type='input']").unbind("change").bind("change",function(){b[a(this).attr("D_key")]=a(this).val()}),c.target.find("[D_type='longInput']").unbind("change").bind("change",function(){b[a(this).attr("D_key")]=a(this).val()}),c.target.find("[D_type='textarea']").unbind("change").bind("change",function(){b[a(this).attr("D_key")]=a(this).val()}),c.target.find("[D_type='select'] .dropdownPoint").unbind("click").bind("click",function(){b[a(this).parents(".select").attr("D_key")]=a(this).attr("value"),a(this).parents(".select").find(".value").html(a(this).html())}),c.target.find("[D_type='number'] .add").unbind("click").bind("click",function(){var c=1;b[a(this).parents(".number").attr("D_key")]&&(c=b[a(this).parents(".number").attr("D_key")]+1),b[a(this).parents(".number").attr("D_key")]=c,a(this).parents(".number").find(".value").val(c)}),c.target.find("[D_type='number'] .sub").unbind("click").bind("click",function(){var c=0;b[a(this).parents(".number").attr("D_key")]&&b[a(this).parents(".number").attr("D_key")]>0&&(c=b[a(this).parents(".number").attr("D_key")]-1),b[a(this).parents(".number").attr("D_key")]=c,a(this).parents(".number").find(".value").val(c)}),c.target.find("[D_type='number'] .value").unbind("change").bind("change",function(){b[a(this).parents(".number").attr("D_key")]=a(this).val()}),c.target.find("[D_type='time']").each(function(){var c=this;a(this).datepicker({dateFormat:"yy-mm-dd",onSelect:function(){b[a(c).attr("D_key")]=Number(moment(a(c).val(),"YYYY-MM-DD").format("x"))}})}),c.target.find("[D_type='pic'] form").each(function(){var c=this;a(this).ajaxForm(),a(this).find("input").unbind("change").bind("change",function(){a(c).ajaxSubmit(function(d){d=JSON.parse(d),d.succeed&&(b[a(c).parents(".picFrame").attr("D_key")]||(b[a(c).parents(".picFrame").attr("D_key")]=[]),b[a(c).parents(".picFrame").attr("D_key")].push(d.data),a(c).parents(".addButton").before('<img src="'+d.data+'"/>'))})})}),c.target.find("[D_type='singlePic'] form").each(function(){var c=this;a(this).ajaxForm(),a(this).find("input").unbind("change").bind("change",function(){a(c).ajaxSubmit(function(d){d=JSON.parse(d),d.succeed&&(b[a(c).parents(".singlePic").attr("D_key")]=d.data,a(c).parents(".singlePic").find("img").attr("src",d.data))})})}),c.target.find("[D_type='state']").each(function(){var d=this;a(d).find(".addState").unbind("click").bind("click",function(){b[a(d).attr("D_key")]||(b[a(d).attr("D_key")]=[]),b[a(d).attr("D_key")].push({title:"",list:[]}),c.reflash()}),a(d).find(".stateRemove").unbind("click").bind("click",function(){b[a(d).attr("D_key")].splice(a(this).attr("gid"),1),c.reflash()}),a(d).find(".addStatePoint").unbind("click").bind("click",function(){b[a(d).attr("D_key")][a(this).attr("gid")].list.push({id:uuid(),img:"",name:""}),c.reflash()}),a(d).find(".statePointRemove").unbind("click").bind("click",function(){b[a(d).attr("D_key")][a(this).attr("gid")].list.splice(a(this).attr("pid"),1),c.reflash()}),a(d).find("form").each(function(){a(this).ajaxForm()}),a(d).find("form input").unbind("change").bind("change",function(){var e=this;a(this).parent().ajaxSubmit(function(f){f=JSON.parse(f),f.succeed&&(b[a(d).attr("D_key")][a(e).attr("gid")].list[a(e).attr("pid")].img=f.data,c.reflash())})}),a(d).find(".statePointName").unbind("change").bind("change",function(){b[a(d).attr("D_key")][a(this).attr("gid")].list[a(this).attr("pid")].name=a(this).val()})}),c.target.find("[D_type='keyValue']").each(function(){var d=this;a(d).find(".addState").unbind("click").bind("click",function(){b[a(d).attr("D_key")]||(b[a(d).attr("D_key")]=[]),b[a(d).attr("D_key")].push({id:uuid(),key:"",value:""}),c.reflash()}),a(d).find(".pointRemove").unbind("click").bind("click",function(){b[a(d).attr("D_key")].splice(a(this).attr("gid"),1),c.reflash()}),a(d).find(".pointKey").unbind("change").bind("change",function(){b[a(d).attr("D_key")][a(this).attr("pid")].key=a(this).val()}),a(d).find(".pointValue").unbind("change").bind("change",function(){b[a(d).attr("D_key")][a(this).attr("pid")].value=a(this).val()})}),c.target.find("[D_type='richWord']").each(function(){var c=this,d=UM.getEditor(a(c).attr("id"));b[a(c).attr("D_key")]&&d.setContent(b[a(c).attr("D_key")]),d.addListener("contentChange",function(){b[a(c).attr("D_key")]=d.getContent()})}),c.target.find("[D_type='linkage']").each(function(){function d(g){if(data.list[f].option&&data.list[f].option[g]){var h="all";if(g&&b[data.list[f].name]&&b[data.list[f].name][g-1]&&(h=b[data.list[f].name][g-1]),!g||"all"!==h){var i=a('<div class="select linkageSelect"><div class="value"></div><div class="dropdownFrame"></div><div class="drop"><span class="fa fa-triangle-down"></span></div></div>').appendTo(a(e));a.each(data.list[f].option[g][h],function(d,h){b[data.list[f].name]&&h.value===b[data.list[f].name][g]&&i.find(".value").html(h.label);var j=a('<div class="dropdownPoint" value="'+h.value+'" num="'+g+'">'+h.label+"</div>").appendTo(i.find(".dropdownFrame"));j.unbind("click").bind("click",function(){b[a(e).attr("D_key")]||(b[a(e).attr("D_key")]=[]),b[a(e).attr("D_key")][a(this).attr("num")]=a(this).attr("value"),b[a(e).attr("D_key")].splice(Number(a(this).attr("num"))+1,b[a(e).attr("D_key")].length-1-Number(a(this).attr("num"))),c.reflash()})})}d(g+1)}}var e=this,f=a(e).attr("num");d(0),a(e).append('<div class="clear"></div>')}),c.target.find("[D_type='price']").each(function(){var d=this;a(d).find(".addState").unbind("click").bind("click",function(){b[a(d).attr("D_key")]||(b[a(d).attr("D_key")]=[]),b[a(d).attr("D_key")].push({id:uuid(),state:[],price:0}),c.reflash()}),a(d).find(".dropdownPoint").unbind("click").bind("click",function(){b[a(d).attr("D_key")][a(this).attr("pNum")].state[a(this).attr("oNum")]=a(this).attr("value"),c.reflash()}),a(d).find(".add").unbind("click").bind("click",function(){b[a(d).attr("D_key")][a(this).attr("pNum")].price++,c.reflash()}),a(d).find(".sub").unbind("click").bind("click",function(){b[a(d).attr("D_key")][a(this).attr("pNum")].price>=1&&(b[a(d).attr("D_key")][a(this).attr("pNum")].price--,c.reflash())}),a(d).find("input").unbind("change").bind("change",function(){Number(a(this).val())&&(b[a(d).attr("D_key")][a(this).attr("pNum")].price=Number(a(this).val())),c.reflash()})}),c.target.find("[D_type='buttonInput']").each(function(){var c=this;a(c).find("input").unbind("change").bind("change",function(){b[a(c).attr("D_key")]=a(this).val()})})},c.set=function(a){},c.setResult=function(a){b=a},c.result=function(){return b}}})}($,app,config);