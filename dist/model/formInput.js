/*! This is uglify test - 2016-01-04 */!function(a,b,c){b.model.set({name:"formInput",css:["form_input"],html:["form_input","form_inputFrame"],fn:function(){var b={},c={},d=this;d.init=function(){d.target.html("")},d.reList=function(){c.result=b;var e=_.template(d.html[0])(c);d.target.find(".list").html(e),d.target.find("[D_type='input']").unbind("change").bind("change",function(){b[a(this).attr("D_key")]=a(this).val()}),d.target.find("[D_type='longInput']").unbind("change").bind("change",function(){b[a(this).attr("D_key")]=a(this).val()}),d.target.find("[D_type='buttonInput'] .input").unbind("change").bind("change",function(){b[a(this).parents(".buttonInput").attr("D_key")]=a(this).val()}),d.target.find("[D_type='textarea']").unbind("change").bind("change",function(){b[a(this).attr("D_key")]=a(this).val()}),d.target.find("[D_type='select'] .dropdownPoint").unbind("click").bind("click",function(){b[a(this).parents(".select").attr("D_key")]=a(this).attr("value"),a(this).parents(".select").find(".value").html(a(this).html())}),d.target.find("[D_type='number'] .add").unbind("click").bind("click",function(){var c=1;b[a(this).parents(".number").attr("D_key")]&&(c=b[a(this).parents(".number").attr("D_key")]+1),b[a(this).parents(".number").attr("D_key")]=c,a(this).parents(".number").find(".value").val(c)}),d.target.find("[D_type='number'] .sub").unbind("click").bind("click",function(){var c=0;b[a(this).parents(".number").attr("D_key")]&&b[a(this).parents(".number").attr("D_key")]>0&&(c=b[a(this).parents(".number").attr("D_key")]-1),b[a(this).parents(".number").attr("D_key")]=c,a(this).parents(".number").find(".value").val(c)}),d.target.find("[D_type='number'] .value").unbind("change").bind("change",function(){b[a(this).parents(".number").attr("D_key")]=a(this).val()}),d.target.find("[D_type='time']").each(function(){var c=this;a(this).datepicker({dateFormat:"yy-mm-dd",onSelect:function(){b[a(c).attr("D_key")]=Number(moment(a(c).val(),"YYYY-MM-DD").format("x"))}})}),d.target.find("[D_type='pic'] form").each(function(){var c=this;a(this).ajaxForm(),a(this).find("input").unbind("change").bind("change",function(){a(c).ajaxSubmit(function(d){d=JSON.parse(d),d.succeed&&(b[a(c).parents(".picFrame").attr("D_key")]||(b[a(c).parents(".picFrame").attr("D_key")]=[]),b[a(c).parents(".picFrame").attr("D_key")].push(d.data),a(c).parents(".addButton").before('<img src="'+d.data+'"/>'))})})}),d.target.find("[D_type='singlePic'] form").each(function(){var c=this;a(this).ajaxForm(),a(this).find("input").unbind("change").bind("change",function(){a(c).ajaxSubmit(function(d){d=JSON.parse(d),d.succeed&&(b[a(c).parents(".singlePic").attr("D_key")]=d.data,a(c).parents(".singlePic").find("img").attr("src",d.data))})})}),d.target.find("[D_type='state']").each(function(){var c=this;a(c).find(".addState").unbind("click").bind("click",function(){b[a(c).attr("D_key")]||(b[a(c).attr("D_key")]=[]),b[a(c).attr("D_key")].push({title:"",list:[],id:uuid()}),d.reList()}),a(c).find(".stateTitle input").unbind("change").bind("change",function(){b[a(c).attr("D_key")][a(this).attr("gid")].title=a(this).val()}),a(c).find(".stateRemove").unbind("click").bind("click",function(){b[a(c).attr("D_key")].splice(a(this).attr("gid"),1),d.reList()}),a(c).find(".addStatePoint").unbind("click").bind("click",function(){b[a(c).attr("D_key")][a(this).attr("gid")].list.push({id:uuid(),img:"",name:""}),d.reList()}),a(c).find(".statePointRemove").unbind("click").bind("click",function(){b[a(c).attr("D_key")][a(this).attr("gid")].list.splice(a(this).attr("pid"),1),d.reList()}),a(c).find("form").each(function(){a(this).ajaxForm()}),a(c).find("form input").unbind("change").bind("change",function(){var e=this;a(this).parent().ajaxSubmit(function(f){f=JSON.parse(f),f.succeed&&(b[a(c).attr("D_key")][a(e).attr("gid")].list[a(e).attr("pid")].img=f.data,d.reList())})}),a(c).find(".statePointName").unbind("change").bind("change",function(){b[a(c).attr("D_key")][a(this).attr("gid")].list[a(this).attr("pid")].name=a(this).val()})}),d.target.find("[D_type='keyValue']").each(function(){var c=this;a(c).find(".addState").unbind("click").bind("click",function(){b[a(c).attr("D_key")]||(b[a(c).attr("D_key")]=[]),b[a(c).attr("D_key")].push({id:uuid(),key:"",value:""}),d.reList()}),a(c).find(".pointRemove").unbind("click").bind("click",function(){b[a(c).attr("D_key")].splice(a(this).attr("gid"),1),d.reList()}),a(c).find(".pointKey").unbind("change").bind("change",function(){b[a(c).attr("D_key")][a(this).attr("pid")].key=a(this).val()}),a(c).find(".pointValue").unbind("change").bind("change",function(){b[a(c).attr("D_key")][a(this).attr("pid")].value=a(this).val()})}),d.target.find("[D_type='richWord']").each(function(){var c=this,d=UM.getEditor(a(c).attr("id"));b[a(c).attr("D_key")]&&d.setContent(b[a(c).attr("D_key")]),d.addListener("contentChange",function(){b[a(c).attr("D_key")]=d.getContent()})}),d.target.find("[D_type='linkage']").each(function(){function e(h){var i="";if(h&&b[c.list[g].name]&&b[c.list[g].name][h-1]?i=b[c.list[g].name][h-1]:h||(i="all"),c.list[g].option&&c.list[g].option[i]&&i){if(!h||"all"!==i){var j=a('<div class="select linkageSelect"><div class="value"></div><div class="dropdownFrame"></div><div class="drop"><span class="fa fa-triangle-down"></span></div></div>').appendTo(a(f));a.each(c.list[g].option[i],function(e,i){b[c.list[g].name]&&i.value===b[c.list[g].name][h]&&j.find(".value").html(i.label);var k=a('<div class="dropdownPoint" value="'+i.value+'" num="'+h+'">'+i.label+"</div>").appendTo(j.find(".dropdownFrame"));k.unbind("click").bind("click",function(){b[a(f).attr("D_key")]||(b[a(f).attr("D_key")]=[]),b[a(f).attr("D_key")][a(this).attr("num")]=a(this).attr("value"),b[a(f).attr("D_key")].splice(Number(a(this).attr("num"))+1,b[a(f).attr("D_key")].length-1-Number(a(this).attr("num"))),d.reList()})})}e(h+1)}}var f=this,g=a(f).attr("num");e(0),a(f).append('<div class="clear"></div>')}),d.target.find("[D_type='linkageSimple']").each(function(){function d(g){var h="";if(g&&b[c.list[f].name]&&b[c.list[f].name][g-1]?h=b[c.list[f].name][g-1]:g||(h="all"),c.list[f].option&&c.list[f].option[h]&&h){if(!g||"all"!==h){var i=a('<div class="select linkageSelect"><div class="value"></div></div>').appendTo(a(e));a.each(c.list[f].option[h],function(a,d){b[c.list[f].name]&&d.value===b[c.list[f].name][g]&&i.find(".value").html(d.label)})}d(g+1)}}var e=this,f=a(e).attr("num");d(0),a(e).append('<div class="clear"></div>')}),d.target.find("[D_type='price']").each(function(){var c=this;a(c).find(".addState").unbind("click").bind("click",function(){b[a(c).attr("D_key")]||(b[a(c).attr("D_key")]=[]),b[a(c).attr("D_key")].push({id:uuid(),state:{},price:0,count:0}),d.reList()}),a(c).find(".dropdownPoint").unbind("click").bind("click",function(){b[a(c).attr("D_key")][a(this).attr("pNum")].state[a(this).attr("oId")]=a(this).attr("value"),d.reList()}),a(c).find(".add").unbind("click").bind("click",function(){b[a(c).attr("D_key")][a(this).attr("pNum")][a(this).attr("D_key")]++,d.reList()}),a(c).find(".sub").unbind("click").bind("click",function(){b[a(c).attr("D_key")][a(this).attr("pNum")][a(this).attr("D_key")]>=1&&(b[a(c).attr("D_key")][a(this).attr("pNum")][a(this).attr("D_key")]--,d.reList())}),a(c).find("input").unbind("change").bind("change",function(){Number(a(this).val())&&(b[a(c).attr("D_key")][a(this).attr("pNum")][a(this).attr("D_key")]=Number(a(this).val())),d.reList()})}),d.target.find("[D_type='tree']").each(function(){function c(b,d){return f[b]?("all"===b?a.each(f.all,function(b,f){a('<div class="treePoint" pid="'+f.id+'" paid="'+f.parentId+'"><input class="input value" value="'+(f.name||"")+'"/><div class="addChild">+</div><div class="removeChild">x</div><div class="clear"></div></div>').appendTo(a(e).find(".pointFrame"));c(f.id,d+1)}):(f[b].reverse(),a.each(f[b],function(b,f){a('<div class="treePoint" pid="'+f.id+'" paid="'+f.parentId+'" style="left:'+20*d+'px;"><input class="input value" value="'+(f.name||"")+'"/><div class="lineX"></div><div class="lineY"></div><div class="addChild">+</div><div class="removeChild">x</div><div class="clear"></div></div>').insertAfter(a(e).find("[pid='"+f.parentId+"']"));c(f.id,d+1)})),void a(e).find(".treePoint").each(function(){if("all"!==a(this).attr("paid")){var b=a(e).find(".treePoint[pid='"+a(this).attr("paid")+"']").offset().top,c=a(this).offset().top,d=c-b-17;a(this).find(".lineY").height(d+"px")}})):!1}var e=this,f={};b[a(e).attr("D_key")]&&b[a(e).attr("D_key")].length&&(f=_.groupBy(b[a(e).attr("D_key")],"parentId"),c("all",0)),a(e).find(".addRoot").unbind("click").bind("click",function(){b[a(e).attr("D_key")]||(b[a(e).attr("D_key")]=[]),b[a(e).attr("D_key")].push({id:uuid(),name:"",parentId:"all"}),d.reList()}),a(e).find(".addChild").unbind("click").bind("click",function(){b[a(e).attr("D_key")].push({id:uuid(),name:"",parentId:a(this).parents(".treePoint").attr("pid")}),d.reList()}),a(e).find(".removeChild").unbind("click").bind("click",function(){var c=this,f=0;a.each(b[a(e).attr("D_key")],function(b,d){d.id===a(c).parents(".treePoint").attr("pid")&&(f=b)}),b[a(e).attr("D_key")].splice(f,1),d.reList()}),a(e).find(".value").unbind("change").bind("change",function(){var c=this,f=0;a.each(b[a(e).attr("D_key")],function(b,d){d.id===a(c).parents(".treePoint").attr("pid")&&(f=b)}),b[a(e).attr("D_key")][f].name=a(c).val(),d.reList()})}),d.target.find("[D_type='checkbox']").each(function(){var c=this;a(c).find(".checkPoint").unbind("click").bind("click",function(){if("0"===a(this).attr("check"))a(this).attr("check","1"),a(this).addClass("hl"),b[a(c).attr("D_key")]||(b[a(c).attr("D_key")]=[]),b[a(c).attr("D_key")].push(a(this).attr("pid"));else{a(this).attr("check","0"),a(this).removeClass("hl");var d=a(this).attr("pid"),e=[];a.each(b[a(c).attr("D_key")],function(a,b){b!==d&&e.push(b)}),b[a(c).attr("D_key")]=e}})}),d.target.find("[D_type='optionAdd']").each(function(){var c=this;a(c).find(".addOption").unbind("click").bind("click",function(){b[a(c).attr("D_key")]||(b[a(c).attr("D_key")]=[]),b[a(c).attr("D_key")].push({id:uuid(),name:""}),d.reList()}),a(c).find(".input").unbind("change").bind("change",function(){b[a(c).attr("D_key")][a(this).attr("oNum")].name=a(this).val(),d.reList()}),a(c).find(".optionRemove").unbind("click").bind("click",function(){b[a(c).attr("D_key")].splice(a(this).attr("oNum"),1),d.reList()})})},d.reflash=function(){var a=_.template(d.html[1])(c);d.target.html(d.css[0]+a),d.reList()},d.set=function(a){c=a},d.setResult=function(a){b=a},d.result=function(){return b}}})}($,app,config);