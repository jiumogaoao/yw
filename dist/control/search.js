/*! This is uglify test - 2016-01-25 */!function(a,b,c){b.control.set({name:"search",par:["object","type","brand","tag","sort","title"],fn:function(c){function d(){b.model.get("#head","headSimple","head",function(a){a.reflash(),a.show()})}function e(){b.model.get("#foot","footSimple","foot",function(a){a.show()})}function f(){b.model.get("#main","navSimple","nav",function(a){a.show(),a.reflash()}),b.model.get("#main","searchNavSimple","searchNav",function(a){a.setResult({objArry:i,typeArry:j,brandArry:k,tagArry:l,productArry:m,search:n}),a.show(),a.reflash()});var c=[],d=function(a){"all"===n.object?e(a):a.object[0]===n.object&&e(a)},e=function(a){"all"===n.type?f(a):a.object[1]===n.type&&f(a)},f=function(a){"all"===n.brand?g(a):a.object[3]===n.brand&&g(a)},g=function(b){if("all"===n.tag)c.push(b);else{var d=0;a.each(b.tag,function(a,e){e!==n.tag||d||(d=1,c.push(b))})}};b.model.get("#main","productListSimple","productList",function(b){c=[],a.each(m,function(a,b){d(b)}),c="0"===n.sort?_.sortBy(c,function(a){return Math.sin(a.visit)}):"1"===n.sort?_.sortBy(c,function(a){return Math.sin(a.star)}):_.sortBy(c,function(a){return Math.sin(a.price)}),b.setResult(c),b.show(),b.reflash()})}function g(c){h=c;var g=0,n=function(){g++,3===g&&(d(),e(),f())};b.api.run("type_get",{tk:h},function(a){l=a,n()},function(a){b.pop.on("alert",{text:JSON.stringify(a)})}),b.api.run("obj_get",{tk:h},function(b){var c=_.groupBy(b,"parentId");i=c.all,a.each(i,function(b,d){c[d.id]&&a.each(c[d.id],function(b,d){j.push(d),c[d.id]&&a.each(c[d.id],function(a,b){k.push(b)})})}),n()},function(a){b.pop.on("alert",{text:JSON.stringify(a)})}),b.api.run("product_get",{tk:h},function(a){m=a,n()},function(a){b.pop.on("alert",{text:JSON.stringify(a)})})}var h="",i=[],j=[],k=[],l=[],m=[],n={object:c.object||"all",type:c.type||"all",brand:c.brand||"all",tag:c.tag||"all",sort:c.sort||"0",title:c.title||""};b.api.tk(g)}})}($,app,config);