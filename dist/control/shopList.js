/*! This is uglify test - 2016-01-25 */!function(a,b,c){b.control.set({name:"shopList",par:["object","type","brand","tag","sort","title"],fn:function(c){function d(){b.model.get("#head","headSimple","head",function(a){a.reflash(),a.show()})}function e(){b.model.get("#foot","footSimple","foot",function(a){a.show()})}function f(){b.model.get("#main","navSimple","nav",function(a){a.show(),a.reflash()}),b.model.get("#main","shopListSimple","shopList",function(c){var d={};a.each(m,function(a,b){if(k[b.id]){var c=k[b.id];c.buy=b,d[c.shopId]||(d[c.shopId]={id:c.shopId,list:[]}),d[c.shopId].list.push(c)}}),searchList={};var e={};a.each(m,function(a,b){if(k[b.id]){e[k[b.id].shopId]||(e[k[b.id].shopId]={id:k[b.id].shopId,star:l[k[b.id].shopId].star,shopName:l[k[b.id].shopId].shopName,list:[]});var c=k[b.id];c.buy=b,e[k[b.id].shopId].list.push(c)}}),c.set(e),c.setResult(searchList),c.show(),c.reflash(),c.target.find(".addButton").unbind("click").bind("click",function(){var d=c.result(),e={tk:h,product:[],shopName:d.shopName};d.list?(a.each(d.list,function(a,b){e.product.push(m[b])}),b.api.run("buy",e,function(){b.pop.on("alert",{text:"提交成功"}),b.hash("buyListUc/1")},function(a){b.pop.on("alert",{text:JSON.stringify(a)})})):b.pop.on("alert",{text:"请先选择商品"})})})}function g(a){h=a;var c=0,g=function(){c++,5===c&&(d(),e(),f())};b.api.run("type_get",{tk:h},function(a){j=a,g()},function(a){b.pop.on("alert",{text:JSON.stringify(a)})}),b.api.run("obj_get",{tk:h},function(a){i=a,g()},function(a){b.pop.on("alert",{text:JSON.stringify(a)})}),b.api.run("product_get",{tk:h},function(a){k=_.indexBy(a,"id"),g()},function(a){b.pop.on("alert",{text:JSON.stringify(a)})}),b.api.run("client_shopMessage",{tk:h},function(a){l=_.indexBy(a,"id"),g()},function(a){b.pop.on("alert",{text:JSON.stringify(a)})}),b.api.run("tk_get",{tk:h},function(a){m=a.user.shopList,g()},function(a){b.pop.on("alert",{text:JSON.stringify(a)})})}var h="",i=[],j=[],k=[],l=[],m={};b.api.tk(g)}})}($,app,config);